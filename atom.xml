<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://kimiz3369.github.io</id>
    <title>Gridea</title>
    <updated>2020-12-09T03:07:33.408Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://kimiz3369.github.io"/>
    <link rel="self" href="https://kimiz3369.github.io/atom.xml"/>
    <subtitle>æ¸©æ•…è€ŒçŸ¥æ–°</subtitle>
    <logo>https://kimiz3369.github.io/images/avatar.png</logo>
    <icon>https://kimiz3369.github.io/favicon.ico</icon>
    <rights>All rights reserved 2020, Gridea</rights>
    <entry>
        <title type="html"><![CDATA[NPOIä½¿ç”¨æ‰‹å†Œ]]></title>
        <id>https://kimiz3369.github.io/post/npoi-shi-yong-shou-ce/</id>
        <link href="https://kimiz3369.github.io/post/npoi-shi-yong-shou-ce/">
        </link>
        <updated>2020-12-09T03:07:02.000Z</updated>
        <content type="html"><![CDATA[<p>https://www.cnblogs.com/ICE-SKY/p/5856257.html</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[é˜¿é‡Œäº‘RPAæœºå™¨å¼€å‘]]></title>
        <id>https://kimiz3369.github.io/post/a-li-yun-rpa-ji-qi-kai-fa/</id>
        <link href="https://kimiz3369.github.io/post/a-li-yun-rpa-ji-qi-kai-fa/">
        </link>
        <updated>2020-08-12T10:46:10.000Z</updated>
        <content type="html"><![CDATA[<p>äº§å“æŒ‡å¯¼æ‰‹å†Œ<br>
https://www.yuque.com/aliyun_rpa/user_guide/tflue9</p>
<p>å¼€å‘æ‰‹å†Œ<br>
https://www.yuque.com/aliyun_rpa/api_document/ch3kr2</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Win10æ¸…ç†ç³»ç»Ÿç›˜ç©ºé—´å®ç”¨æ”»ç•¥]]></title>
        <id>https://kimiz3369.github.io/post/win10-qing-li-xi-tong-pan-kong-jian-shi-yong-gong-lue/</id>
        <link href="https://kimiz3369.github.io/post/win10-qing-li-xi-tong-pan-kong-jian-shi-yong-gong-lue/">
        </link>
        <updated>2020-06-12T01:49:55.000Z</updated>
        <content type="html"><![CDATA[<p>https://zhuanlan.zhihu.com/p/32220500</p>
<p>https://zhuanlan.zhihu.com/p/74793683</p>
<p>cmd: powercfg -h off å…³é—­ä¼‘çœ åŠŸèƒ½</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[PinPointä½¿ç”¨æ‰‹å†Œï¼ˆå›¾æ–‡å¹¶èŒ‚ç‰ˆï¼‰]]></title>
        <id>https://kimiz3369.github.io/post/pinpoint-shi-yong-shou-ce-tu-wen-bing-mao-ban/</id>
        <link href="https://kimiz3369.github.io/post/pinpoint-shi-yong-shou-ce-tu-wen-bing-mao-ban/">
        </link>
        <updated>2020-05-22T03:24:35.000Z</updated>
        <content type="html"><![CDATA[<p>https://blog.csdn.net/u010953917/article/details/84314053</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[JetBrains Rider 2020.1ç ´è§£ç‰ˆ]]></title>
        <id>https://kimiz3369.github.io/post/jetbrains-rider-20201-po-jie-ban/</id>
        <link href="https://kimiz3369.github.io/post/jetbrains-rider-20201-po-jie-ban/">
        </link>
        <updated>2020-05-21T10:49:17.000Z</updated>
        <content type="html"><![CDATA[<p>http://www.xue51.com/soft/38055.html</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[çº¿ç¨‹ã€å¤šçº¿ç¨‹ä¸çº¿ç¨‹æ± æ€»ç»“]]></title>
        <id>https://kimiz3369.github.io/post/xian-cheng-duo-xian-cheng-yu-xian-cheng-chi-zong-jie/</id>
        <link href="https://kimiz3369.github.io/post/xian-cheng-duo-xian-cheng-yu-xian-cheng-chi-zong-jie/">
        </link>
        <updated>2020-05-21T09:17:00.000Z</updated>
        <content type="html"><![CDATA[<p>å…ˆçœ‹å‡ ä¸ªæ¦‚å¿µï¼š<br>
çº¿ç¨‹ï¼šè¿›ç¨‹ä¸­è´Ÿè´£ç¨‹åºæ‰§è¡Œçš„æ‰§è¡Œå•å…ƒã€‚ä¸€ä¸ªè¿›ç¨‹ä¸­è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹ã€‚</p>
<p>å¤šçº¿ç¨‹ï¼šè§£å†³å¤šä»»åŠ¡åŒæ—¶æ‰§è¡Œçš„éœ€æ±‚ï¼Œåˆç†ä½¿ç”¨CPUèµ„æºã€‚å¤šçº¿ç¨‹çš„è¿è¡Œæ˜¯æ ¹æ®CPUåˆ‡æ¢å®Œæˆï¼Œå¦‚ä½•åˆ‡æ¢ç”±CPUå†³å®šï¼Œå› æ­¤å¤šçº¿ç¨‹è¿è¡Œå…·æœ‰ä¸ç¡®å®šæ€§ã€‚</p>
<p>çº¿ç¨‹æ± ï¼šåŸºæœ¬æ€æƒ³è¿˜æ˜¯ä¸€ç§å¯¹è±¡æ± çš„æ€æƒ³ï¼Œå¼€è¾Ÿä¸€å—å†…å­˜ç©ºé—´ï¼Œé‡Œé¢å­˜æ”¾äº†ä¼—å¤š(æœªæ­»äº¡)çš„çº¿ç¨‹ï¼Œæ± ä¸­çº¿ç¨‹æ‰§è¡Œè°ƒåº¦ç”±æ± ç®¡ç†å™¨æ¥å¤„ç†ã€‚å½“æœ‰çº¿ç¨‹ä»»åŠ¡æ—¶ï¼Œä»æ± ä¸­å–ä¸€ä¸ªï¼Œæ‰§è¡Œå®Œæˆåçº¿ç¨‹å¯¹è±¡å½’æ± ï¼Œè¿™æ ·å¯ä»¥é¿å…åå¤åˆ›å»ºçº¿ç¨‹å¯¹è±¡æ‰€å¸¦æ¥çš„æ€§èƒ½å¼€é”€ï¼ŒèŠ‚çœäº†ç³»ç»Ÿçš„èµ„æºã€‚</p>
<p>å¦‚æœå¯¹çº¿ç¨‹æ¦‚å¿µä¸æ¸…æ™°çš„è¯ï¼Œä¸å¦¨å…ˆçœ‹çœ‹æˆ‘æ˜¯ä¸€ä¸ªçº¿ç¨‹è¿™ç¯‡æ–‡ç« ï¼Œæ‹ŸäººåŒ–çš„æ•…äº‹é˜è¿°çº¿ç¨‹çš„å·¥ä½œåŸç†ã€‚</p>
<p>â— çº¿ç¨‹<br>
åˆ›å»ºçº¿ç¨‹çš„ä¸¤ç§æ–¹å¼ï¼š</p>
<p>ä¸€ã€ç»§æ‰¿Threadç±»ï¼Œæ‰©å±•çº¿ç¨‹ã€‚<br>
class DemoThread extends Thread {</p>
<pre><code>@Override
public void run() {
    super.run();
    // Perform time-consuming operation...
}
</code></pre>
<p>}</p>
<p>DemoThread t = new DemoThread();<br>
t.start();<br>
ç»§æ‰¿Threadç±»ï¼Œè¦†ç›–run()æ–¹æ³•ã€‚<br>
åˆ›å»ºçº¿ç¨‹å¯¹è±¡å¹¶ç”¨start()æ–¹æ³•å¯åŠ¨çº¿ç¨‹ã€‚<br>
é¢è¯•é¢˜<br>
1ï¼‰çº¿ç¨‹å’Œè¿›ç¨‹æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ<br>
ä¸€ä¸ªè¿›ç¨‹æ˜¯ä¸€ä¸ªç‹¬ç«‹(self contained)çš„è¿è¡Œç¯å¢ƒï¼Œå®ƒå¯ä»¥è¢«çœ‹ä½œä¸€ä¸ªç¨‹åºæˆ–è€…ä¸€ä¸ªåº”ç”¨ã€‚è€Œçº¿ç¨‹æ˜¯åœ¨è¿›ç¨‹ä¸­æ‰§è¡Œçš„ä¸€ä¸ªä»»åŠ¡ã€‚çº¿ç¨‹æ˜¯è¿›ç¨‹çš„å­é›†ï¼Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥æœ‰å¾ˆå¤šçº¿ç¨‹ï¼Œæ¯æ¡çº¿ç¨‹å¹¶è¡Œæ‰§è¡Œä¸åŒçš„ä»»åŠ¡ã€‚ä¸åŒçš„è¿›ç¨‹ä½¿ç”¨ä¸åŒçš„å†…å­˜ç©ºé—´ï¼Œè€Œæ‰€æœ‰çš„çº¿ç¨‹å…±äº«ä¸€ç‰‡ç›¸åŒçš„å†…å­˜ç©ºé—´ã€‚åˆ«æŠŠå®ƒå’Œæ ˆå†…å­˜ææ··ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æ‹¥æœ‰å•ç‹¬çš„æ ˆå†…å­˜ç”¨æ¥å­˜å‚¨æœ¬åœ°æ•°æ®ã€‚</p>
<p>2ï¼‰å¦‚ä½•åœ¨Javaä¸­å®ç°çº¿ç¨‹ï¼Ÿ<br>
åˆ›å»ºçº¿ç¨‹æœ‰ä¸¤ç§æ–¹å¼ï¼š<br>
ä¸€ã€ç»§æ‰¿ Thread ç±»ï¼Œæ‰©å±•çº¿ç¨‹ã€‚<br>
äºŒã€å®ç° Runnable æ¥å£ã€‚</p>
<p>3ï¼‰Thread ç±»ä¸­çš„ start() å’Œ run() æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ<br>
è°ƒç”¨ start() æ–¹æ³•æ‰ä¼šå¯åŠ¨æ–°çº¿ç¨‹ï¼›å¦‚æœç›´æ¥è°ƒç”¨ Thread çš„ run() æ–¹æ³•ï¼Œå®ƒçš„è¡Œä¸ºå°±ä¼šå’Œæ™®é€šçš„æ–¹æ³•ä¸€æ ·ï¼›ä¸ºäº†åœ¨æ–°çš„çº¿ç¨‹ä¸­æ‰§è¡Œæˆ‘ä»¬çš„ä»£ç ï¼Œå¿…é¡»ä½¿ç”¨ Thread.start() æ–¹æ³•ã€‚</p>
<p>æ‰©å±•<br>
Android ç³»ç»Ÿæ¥å£ HandlerThread ç»§æ‰¿äº† Threadï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯ä»¥ä½¿ç”¨ Handler çš„ Threadï¼Œä¸€ä¸ªå…·æœ‰æ¶ˆæ¯å¾ªç¯çš„çº¿ç¨‹ã€‚run()æ–¹æ³•ä¸­é€šè¿‡ Looper.prepare() æ¥åˆ›å»ºæ¶ˆæ¯é˜Ÿåˆ—ï¼Œé€šè¿‡ Looper.loop() æ¥å¼€å¯æ¶ˆæ¯å¾ªç¯ã€‚å¯ä»¥åœ¨ run() æ–¹æ³•ä¸­æ‰§è¡Œè€—æ—¶çš„ä»»åŠ¡ï¼Œè€Œ HandlerThread å†…éƒ¨åˆ›å»ºäº†æ¶ˆæ¯é˜Ÿåˆ—å¤–ç•Œéœ€è¦é€šè¿‡ Handler çš„æ–¹å¼æ¥é€šçŸ¥ HandlerThread æ‰§è¡Œä¸€ä¸ªå…·ä½“ä»»åŠ¡ï¼›HandlerThread çš„ run() æ–¹æ³•æ˜¯ä¸€ä¸ªæ— é™çš„å¾ªç¯ï¼Œå¯ä»¥é€šè¿‡å®ƒçš„ quite() æˆ– quitSafely() æ–¹æ³•æ¥ç»ˆæ­¢çº¿ç¨‹çš„æ‰§è¡Œï¼›</p>
<p>äºŒã€å®ç°Runnableæ¥å£ã€‚<br>
public class DemoActivity extends BaseActivity implements Runnable {</p>
<pre><code>@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Thread t = new Thread(this);
    t.start();
}

@Override
public void run() {

}
</code></pre>
<p>}<br>
é¢è¯•é¢˜<br>
1ï¼‰ç”¨ Runnable è¿˜æ˜¯ Thread ï¼Ÿ<br>
æˆ‘ä»¬éƒ½çŸ¥é“å¯ä»¥é€šè¿‡ç»§æ‰¿ Thread ç±»æˆ–è€…è°ƒç”¨ Runnable æ¥å£æ¥å®ç°çº¿ç¨‹ï¼Œé—®é¢˜æ˜¯ï¼Œåˆ›å»ºçº¿ç¨‹å“ªç§æ–¹å¼æ›´å¥½å‘¢ï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨å®ƒï¼Ÿè¿™ä¸ªé—®é¢˜å¾ˆå®¹æ˜“å›ç­”ï¼Œå¦‚æœä½ çŸ¥é“Javaä¸æ”¯æŒç±»çš„å¤šé‡ç»§æ‰¿ï¼Œä½†å…è®¸ä½ è°ƒç”¨å¤šä¸ªæ¥å£ã€‚æ‰€ä»¥å¦‚æœä½ è¦ç»§æ‰¿å…¶ä»–ç±»ï¼Œå½“ç„¶æ˜¯è°ƒç”¨Runnableæ¥å£æ›´å¥½äº†ã€‚</p>
<p>2ï¼‰Runnable å’Œ Callable æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ<br>
Runnable å’Œ Callable éƒ½ä»£è¡¨é‚£äº›è¦åœ¨ä¸åŒçš„çº¿ç¨‹ä¸­æ‰§è¡Œçš„ä»»åŠ¡ã€‚Runnable ä» JDK1.0 å¼€å§‹å°±æœ‰äº†ï¼ŒCallable æ˜¯åœ¨ JDK1.5 å¢åŠ çš„ã€‚å®ƒä»¬çš„ä¸»è¦åŒºåˆ«æ˜¯ Callable çš„ call() æ–¹æ³•å¯ä»¥è¿”å›å€¼å’ŒæŠ›å‡ºå¼‚å¸¸ï¼Œè€Œ Runnable çš„ run() æ–¹æ³•æ²¡æœ‰è¿™äº›åŠŸèƒ½ã€‚Callable å¯ä»¥è¿”å›è£…è½½æœ‰è®¡ç®—ç»“æœçš„ Future å¯¹è±¡ã€‚</p>
<p>âš æ³¨æ„ï¼šè¿™é¢ç¬¬äºŒä¸ªé¢è¯•é¢˜ä¸»è¦æ˜¯ä¸ºäº†å¼•å‡ºä¸‹é¢çš„æ‰©å±•ï¼ŒåŸè°…æˆ‘è¿™æ ·ä¸ºéš¾äººçš„å‡ºåœºã€‚</p>
<p>æ‰©å±•<br>
å…ˆçœ‹ä¸€ä¸‹ Runnable å’Œ Callable çš„æºç </p>
<p>public interface Runnable {<br>
public void run();<br>
}</p>
<p>public interface Callable<V> {<br>
V call() throws Exception;<br>
}<br>
å¯ä»¥å¾—å‡ºï¼š</p>
<p>1ï¼‰Callable æ¥å£ä¸‹çš„æ–¹æ³•æ˜¯ call()ï¼ŒRunnable æ¥å£çš„æ–¹æ³•æ˜¯ run()ã€‚<br>
2ï¼‰Callable çš„ä»»åŠ¡æ‰§è¡Œåå¯è¿”å›å€¼ï¼Œè€Œ Runnable çš„ä»»åŠ¡æ˜¯ä¸èƒ½è¿”å›å€¼çš„ã€‚<br>
3ï¼‰call() æ–¹æ³•å¯ä»¥æŠ›å‡ºå¼‚å¸¸ï¼Œrun()æ–¹æ³•ä¸å¯ä»¥çš„ã€‚<br>
4ï¼‰è¿è¡Œ Callable ä»»åŠ¡å¯ä»¥æ‹¿åˆ°ä¸€ä¸ª Future å¯¹è±¡ï¼Œè¡¨ç¤ºå¼‚æ­¥è®¡ç®—çš„ç»“æœã€‚å®ƒæä¾›äº†æ£€æŸ¥è®¡ç®—æ˜¯å¦å®Œæˆçš„æ–¹æ³•ï¼Œä»¥ç­‰å¾…è®¡ç®—çš„å®Œæˆï¼Œå¹¶æ£€ç´¢è®¡ç®—çš„ç»“æœã€‚é€šè¿‡ Future å¯¹è±¡å¯ä»¥äº†è§£ä»»åŠ¡æ‰§è¡Œæƒ…å†µï¼Œå¯å–æ¶ˆä»»åŠ¡çš„æ‰§è¡Œï¼Œè¿˜å¯è·å–æ‰§è¡Œç»“æœã€‚</p>
<p>ä½†æ˜¯ï¼Œä½†æ˜¯ï¼Œå‡¡äº‹éƒ½æœ‰ä½†æ˜¯å˜›...</p>
<p>å•ç‹¬ä½¿ç”¨ Callableï¼Œæ— æ³•åœ¨æ–°çº¿ç¨‹ä¸­(new Thread(Runnable r))ä½¿ç”¨ï¼ŒThread ç±»åªæ”¯æŒ Runnableã€‚ä¸è¿‡ Callable å¯ä»¥ä½¿ç”¨ ExecutorService (åˆæŠ›å‡ºä¸€ä¸ªæ¦‚å¿µï¼Œè¿™ä¸ªæ¦‚å¿µå°†åœ¨ä¸‹é¢çš„çº¿ç¨‹æ± ä¸­è¯´æ˜)ã€‚</p>
<p>ä¸Šé¢åˆæåˆ°äº† Futureï¼Œçœ‹ä¸€ä¸‹ Future æ¥å£ï¼š</p>
<p>public interface Future<V> {</p>
<pre><code>boolean cancel(boolean mayInterruptIfRunning);

boolean isCancelled();

boolean isDone();

V get() throws InterruptedException, ExecutionException;

V get(long timeout, TimeUnit unit)
    throws InterruptedException, ExecutionException, TimeoutException;
</code></pre>
<p>}<br>
Future å®šä¹‰äº†5ä¸ªæ–¹æ³•ï¼š</p>
<p>1ï¼‰boolean cancel(boolean mayInterruptIfRunning)ï¼šè¯•å›¾å–æ¶ˆå¯¹æ­¤ä»»åŠ¡çš„æ‰§è¡Œã€‚å¦‚æœä»»åŠ¡å·²å®Œæˆã€æˆ–å·²å–æ¶ˆï¼Œæˆ–è€…ç”±äºæŸäº›å…¶ä»–åŸå› è€Œæ— æ³•å–æ¶ˆï¼Œåˆ™æ­¤å°è¯•å°†å¤±è´¥ã€‚å½“è°ƒç”¨ cancel() æ—¶ï¼Œå¦‚æœè°ƒç”¨æˆåŠŸï¼Œè€Œæ­¤ä»»åŠ¡å°šæœªå¯åŠ¨ï¼Œåˆ™æ­¤ä»»åŠ¡å°†æ°¸ä¸è¿è¡Œã€‚å¦‚æœä»»åŠ¡å·²ç»å¯åŠ¨ï¼Œåˆ™ mayInterruptIfRunning å‚æ•°ç¡®å®šæ˜¯å¦åº”è¯¥ä»¥è¯•å›¾åœæ­¢ä»»åŠ¡çš„æ–¹å¼æ¥ä¸­æ–­æ‰§è¡Œæ­¤ä»»åŠ¡çš„çº¿ç¨‹ã€‚æ­¤æ–¹æ³•è¿”å›åï¼Œå¯¹ isDone() çš„åç»­è°ƒç”¨å°†å§‹ç»ˆè¿”å› trueã€‚å¦‚æœæ­¤æ–¹æ³•è¿”å› trueï¼Œåˆ™å¯¹ isCancelled() çš„åç»­è°ƒç”¨å°†å§‹ç»ˆè¿”å› trueã€‚<br>
2ï¼‰boolean isCancelled()ï¼šå¦‚æœåœ¨ä»»åŠ¡æ­£å¸¸å®Œæˆå‰å°†å…¶å–æ¶ˆï¼Œåˆ™è¿”å› trueã€‚<br>
3ï¼‰boolean isDone()ï¼šå¦‚æœä»»åŠ¡å·²å®Œæˆï¼Œåˆ™è¿”å› trueã€‚ å¯èƒ½ç”±äºæ­£å¸¸ç»ˆæ­¢ã€å¼‚å¸¸æˆ–å–æ¶ˆè€Œå®Œæˆï¼Œåœ¨æ‰€æœ‰è¿™äº›æƒ…å†µä¸­ï¼Œæ­¤æ–¹æ³•éƒ½å°†è¿”å› trueã€‚<br>
4ï¼‰V get()throws InterruptedException,ExecutionExceptionï¼šå¦‚æœ‰å¿…è¦ï¼Œç­‰å¾…è®¡ç®—å®Œæˆï¼Œç„¶åè·å–å…¶ç»“æœã€‚<br>
5ï¼‰V get(long timeout,TimeUnit unit) throws InterruptedException, ExecutionException, TimeoutExceptionï¼š å¦‚æœ‰å¿…è¦ï¼Œæœ€å¤šç­‰å¾…ä¸ºä½¿è®¡ç®—å®Œæˆæ‰€ç»™å®šçš„æ—¶é—´ä¹‹åï¼Œè·å–å…¶ç»“æœï¼ˆå¦‚æœç»“æœå¯ç”¨ï¼‰ã€‚</p>
<p>çœ‹æ¥ Future æ¥å£ä¹Ÿä¸èƒ½ç”¨åœ¨çº¿ç¨‹ä¸­ï¼Œé‚£æ€ä¹ˆç”¨ï¼Œè°å®ç°äº† Future æ¥å£å‘¢ï¼Ÿç­”ï¼šFutureTaskã€‚</p>
<p>public class FutureTask<V> implements RunnableFuture<V> {<br>
...<br>
}</p>
<p>public interface RunnableFuture<V> extends Runnable, Future<V> {<br>
void run();<br>
}<br>
FutureTask å®ç°äº† Runnable å’Œ Futureï¼Œæ‰€ä»¥å…¼é¡¾ä¸¤è€…ä¼˜ç‚¹ï¼Œæ—¢å¯ä»¥åœ¨ Thread ä¸­ä½¿ç”¨ï¼Œåˆå¯ä»¥åœ¨ ExecutorService ä¸­ä½¿ç”¨ã€‚</p>
<p>çœ‹å®Œä¸Šé¢å•°å“©å•°å—¦çš„ä»‹ç»åï¼Œä¸‹é¢æˆ‘ä»¬å…·ä½“çœ‹ä¸€ä¸‹å…·ä½“ä½¿ç”¨çš„ç¤ºä¾‹ï¼š</p>
<p>Callable<String> callable = new Callable<String>() {<br>
@Override<br>
public String call() throws Exception {<br>
return &quot;ä¸ªäººåšå®¢ï¼šsunfusheng.com&quot;;<br>
}<br>
};</p>
<p>FutureTask<String> task = new FutureTask<String>(callable);</p>
<p>Thread t = new Thread(task);<br>
t.start(); // å¯åŠ¨çº¿ç¨‹<br>
task.cancel(true); // å–æ¶ˆçº¿ç¨‹<br>
ä½¿ç”¨ FutureTask çš„å¥½å¤„æ˜¯ FutureTask æ˜¯ä¸ºäº†å¼¥è¡¥ Thread çš„ä¸è¶³è€Œè®¾è®¡çš„ï¼Œå®ƒå¯ä»¥è®©ç¨‹åºå‘˜å‡†ç¡®åœ°çŸ¥é“çº¿ç¨‹ä»€ä¹ˆæ—¶å€™æ‰§è¡Œå®Œæˆå¹¶è·å¾—åˆ°çº¿ç¨‹æ‰§è¡Œå®Œæˆåè¿”å›çš„ç»“æœã€‚FutureTask æ˜¯ä¸€ç§å¯ä»¥å–æ¶ˆçš„å¼‚æ­¥çš„è®¡ç®—ä»»åŠ¡ï¼Œå®ƒçš„è®¡ç®—æ˜¯é€šè¿‡ Callable å®ç°çš„ï¼Œå®ƒç­‰ä»·äºå¯ä»¥æºå¸¦ç»“æœçš„ Runnableï¼Œå¹¶ä¸”æœ‰ä¸‰ä¸ªçŠ¶æ€ï¼šç­‰å¾…ã€è¿è¡Œå’Œå®Œæˆã€‚å®ŒæˆåŒ…æ‹¬æ‰€æœ‰è®¡ç®—ä»¥ä»»æ„çš„æ–¹å¼ç»“æŸï¼ŒåŒ…æ‹¬æ­£å¸¸ç»“æŸã€å–æ¶ˆå’Œå¼‚å¸¸ã€‚</p>
<p>æŸ¥çœ‹å…·ä½“æ“ä½œä»£ç è¯·å‚è€ƒ ã€Šä¸ªäººå­¦ä¹ é¡¹ç›®DroidStudyã€‹ï¼Œæ„Ÿè°¢æ‚¨çš„å…³æ³¨ã€‚</p>
<p>â— å¤šçº¿ç¨‹<br>
å¤šçº¿ç¨‹çš„æ¦‚å¿µå¾ˆå¥½ç†è§£å°±æ˜¯å¤šæ¡çº¿ç¨‹åŒæ—¶å­˜åœ¨ï¼Œä½†è¦ç”¨å¥½å¤šçº¿ç¨‹ç¡®ä¸å®¹æ˜“ï¼Œæ¶‰åŠåˆ°å¤šçº¿ç¨‹é—´é€šä¿¡ï¼Œå¤šçº¿ç¨‹å…±ç”¨ä¸€ä¸ªèµ„æºç­‰è¯¸å¤šé—®é¢˜ã€‚</p>
<p>ä½¿ç”¨å¤šçº¿ç¨‹çš„ä¼˜ç¼ºç‚¹ï¼š<br>
ä¼˜ç‚¹ï¼š<br>
1ï¼‰é€‚å½“çš„æé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ï¼ˆå¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œï¼‰ã€‚<br>
2ï¼‰é€‚å½“çš„æé«˜äº†èµ„æºåˆ©ç”¨ç‡ï¼ˆCPUã€å†…å­˜ç­‰ï¼‰ã€‚<br>
ç¼ºç‚¹ï¼š<br>
1ï¼‰å ç”¨ä¸€å®šçš„å†…å­˜ç©ºé—´ã€‚<br>
2ï¼‰çº¿ç¨‹è¶Šå¤šCPUçš„è°ƒåº¦å¼€é”€è¶Šå¤§ã€‚<br>
3ï¼‰ç¨‹åºçš„å¤æ‚åº¦ä¼šä¸Šå‡ã€‚</p>
<p>å¯¹äºå¤šçº¿ç¨‹çš„ç¤ºä¾‹ä»£ç æ„Ÿå…´è¶£çš„å¯ä»¥è‡ªå·±å†™Demoå•¦ï¼Œå»è¿è¡Œä½“ä¼šï¼Œä¸‹é¢æˆ‘ä¸»è¦åˆ—å‡ºä¸€äº›å¤šçº¿ç¨‹çš„æŠ€æœ¯ç‚¹ã€‚</p>
<p>synchronized<br>
åŒæ­¥å—å¤§å®¶éƒ½æ¯”è¾ƒç†Ÿæ‚‰ï¼Œé€šè¿‡ synchronized å…³é”®å­—æ¥å®ç°ï¼›æ‰€æœ‰åŠ ä¸Š synchronized çš„æ–¹æ³•å’Œå—è¯­å¥ï¼Œåœ¨å¤šçº¿ç¨‹è®¿é—®çš„æ—¶å€™ï¼ŒåŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿè®¿é—®ã€‚</p>
<p>wait()ã€notify()ã€notifyAll()<br>
è¿™ä¸‰ä¸ªæ–¹æ³•æ˜¯ java.lang.Object çš„ final native æ–¹æ³•ï¼Œä»»ä½•ç»§æ‰¿ java.lang.Object çš„ç±»éƒ½æœ‰è¿™ä¸‰ä¸ªæ–¹æ³•ã€‚å®ƒä»¬æ˜¯Javaè¯­è¨€æä¾›çš„å®ç°çº¿ç¨‹é—´é˜»å¡å’Œæ§åˆ¶è¿›ç¨‹å†…è°ƒåº¦çš„åº•å±‚æœºåˆ¶ï¼Œå¹³æ—¶æˆ‘ä»¬ä¼šå¾ˆå°‘ç”¨åˆ°çš„ã€‚</p>
<p>wait()ï¼š<br>
å¯¼è‡´çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œç›´åˆ°å®ƒè¢«å…¶ä»–çº¿ç¨‹é€šè¿‡notify()æˆ–è€…notifyAllå”¤é†’ï¼Œè¯¥æ–¹æ³•åªèƒ½åœ¨åŒæ­¥æ–¹æ³•ä¸­è°ƒç”¨ã€‚</p>
<p>notify()ï¼š<br>
éšæœºé€‰æ‹©ä¸€ä¸ªåœ¨è¯¥å¯¹è±¡ä¸Šè°ƒç”¨waitæ–¹æ³•çš„çº¿ç¨‹ï¼Œè§£é™¤å…¶é˜»å¡çŠ¶æ€ï¼Œè¯¥æ–¹æ³•åªèƒ½åœ¨åŒæ­¥æ–¹æ³•æˆ–åŒæ­¥å—å†…éƒ¨è°ƒç”¨ã€‚</p>
<p>notifyAll()ï¼š<br>
è§£é™¤æ‰€æœ‰é‚£äº›åœ¨è¯¥å¯¹è±¡ä¸Šè°ƒç”¨waitæ–¹æ³•çš„çº¿ç¨‹çš„é˜»å¡çŠ¶æ€ï¼ŒåŒæ ·è¯¥æ–¹æ³•åªèƒ½åœ¨åŒæ­¥æ–¹æ³•æˆ–åŒæ­¥å—å†…éƒ¨è°ƒç”¨ã€‚</p>
<p>è°ƒç”¨è¿™ä¸‰ä¸ªæ–¹æ³•ä¸­ä»»æ„ä¸€ä¸ªï¼Œå½“å‰çº¿ç¨‹å¿…é¡»æ˜¯é”çš„æŒæœ‰è€…ï¼Œå¦‚æœä¸æ˜¯ä¼šæŠ›å‡ºä¸€ä¸ª IllegalMonitorStateException å¼‚å¸¸ã€‚</p>
<p>wait() ä¸ Thread.sleep(long time) çš„åŒºåˆ«<br>
sleep()ï¼šåœ¨æŒ‡å®šçš„æ¯«ç§’æ•°å†…è®©å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹ä¼‘çœ ï¼ˆæš‚åœæ‰§è¡Œï¼‰ï¼Œè¯¥çº¿ç¨‹ä¸ä¸¢å¤±ä»»ä½•ç›‘è§†å™¨çš„æ‰€å±æƒï¼Œsleep() æ˜¯ Thread ç±»ä¸“å±çš„é™æ€æ–¹æ³•ï¼Œé’ˆå¯¹ä¸€ä¸ªç‰¹å®šçš„çº¿ç¨‹ã€‚<br>
wait() æ–¹æ³•ä½¿å®ä½“æ‰€å¤„çº¿ç¨‹æš‚åœæ‰§è¡Œï¼Œä»è€Œä½¿å¯¹è±¡è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œç›´åˆ°è¢« notify() æ–¹æ³•é€šçŸ¥æˆ–è€… wait() çš„ç­‰å¾…çš„æ—¶é—´åˆ°ã€‚sleep() æ–¹æ³•ä½¿æŒæœ‰çš„çº¿ç¨‹æš‚åœè¿è¡Œï¼Œä»è€Œä½¿çº¿ç¨‹è¿›å…¥ä¼‘çœ çŠ¶æ€ï¼Œç›´åˆ°ç”¨ interrupt æ–¹æ³•æ¥æ‰“æ–­ä»–çš„ä¼‘çœ æˆ–è€… sleep çš„ä¼‘çœ çš„æ—¶é—´åˆ°ã€‚<br>
wait() æ–¹æ³•è¿›å…¥ç­‰å¾…çŠ¶æ€æ—¶ä¼šé‡Šæ”¾åŒæ­¥é”ï¼Œè€Œ sleep() æ–¹æ³•ä¸ä¼šé‡Šæ”¾åŒæ­¥é”ã€‚æ‰€ä»¥ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹æ— é™ sleep æ—¶åˆæ²¡æœ‰ä»»ä½•äººå» interrupt å®ƒçš„æ—¶å€™ï¼Œç¨‹åºå°±äº§ç”Ÿå¤§éº»çƒ¦äº†ï¼Œnotify() æ˜¯ç”¨æ¥é€šçŸ¥çº¿ç¨‹ï¼Œä½†åœ¨ notify() ä¹‹å‰çº¿ç¨‹æ˜¯éœ€è¦è·å¾— lock çš„ã€‚å¦ä¸ªæ„æ€å°±æ˜¯å¿…é¡»å†™åœ¨ synchronized(lockobj) {...} ä¹‹ä¸­ã€‚wait() ä¹Ÿæ˜¯è¿™ä¸ªæ ·å­ï¼Œä¸€ä¸ªçº¿ç¨‹éœ€è¦é‡Šæ”¾æŸä¸ª lockï¼Œä¹Ÿæ˜¯åœ¨å…¶è·å¾— lock æƒ…å†µä¸‹æ‰èƒ½å¤Ÿé‡Šæ”¾ï¼Œæ‰€ä»¥ wait() ä¹Ÿéœ€è¦æ”¾åœ¨ synchronized(lockobj) {...} ä¹‹ä¸­ã€‚</p>
<p>volatile å…³é”®å­—<br>
volatile æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ä¿®é¥°ç¬¦ï¼Œåªæœ‰æˆå‘˜å˜é‡æ‰èƒ½ä½¿ç”¨å®ƒã€‚åœ¨Javaå¹¶å‘ç¨‹åºç¼ºå°‘åŒæ­¥ç±»çš„æƒ…å†µä¸‹ï¼Œå¤šçº¿ç¨‹å¯¹æˆå‘˜å˜é‡çš„æ“ä½œå¯¹å…¶å®ƒçº¿ç¨‹æ˜¯é€æ˜çš„ã€‚volatile å˜é‡å¯ä»¥ä¿è¯ä¸‹ä¸€ä¸ªè¯»å–æ“ä½œä¼šåœ¨å‰ä¸€ä¸ªå†™æ“ä½œä¹‹åå‘ç”Ÿã€‚çº¿ç¨‹éƒ½ä¼šç›´æ¥ä»å†…å­˜ä¸­è¯»å–è¯¥å˜é‡å¹¶ä¸”ä¸ç¼“å­˜å®ƒã€‚è¿™å°±ç¡®ä¿äº†çº¿ç¨‹è¯»å–åˆ°çš„å˜é‡æ˜¯åŒå†…å­˜ä¸­æ˜¯ä¸€è‡´çš„ã€‚</p>
<p>ThreadLocal å˜é‡<br>
ThreadLocal æ˜¯Javaé‡Œä¸€ç§ç‰¹æ®Šçš„å˜é‡ã€‚æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ª ThreadLocal å°±æ˜¯æ¯ä¸ªçº¿ç¨‹éƒ½æ‹¥æœ‰äº†è‡ªå·±ç‹¬ç«‹çš„ä¸€ä¸ªå˜é‡ï¼Œç«äº‰æ¡ä»¶è¢«å½»åº•æ¶ˆé™¤äº†ã€‚å¦‚æœä¸ºæ¯ä¸ªçº¿ç¨‹æä¾›ä¸€ä¸ªè‡ªå·±ç‹¬æœ‰çš„å˜é‡æ‹·è´ï¼Œå°†å¤§å¤§æé«˜æ•ˆç‡ã€‚é¦–å…ˆï¼Œé€šè¿‡å¤ç”¨å‡å°‘äº†ä»£ä»·é«˜æ˜‚çš„å¯¹è±¡çš„åˆ›å»ºä¸ªæ•°ã€‚å…¶æ¬¡ï¼Œä½ åœ¨æ²¡æœ‰ä½¿ç”¨é«˜ä»£ä»·çš„åŒæ­¥æˆ–è€…ä¸å˜æ€§çš„æƒ…å†µä¸‹è·å¾—äº†çº¿ç¨‹å®‰å…¨ã€‚</p>
<p>join() æ–¹æ³•<br>
join() æ–¹æ³•å®šä¹‰åœ¨ Thread ç±»ä¸­ï¼Œæ‰€ä»¥è°ƒç”¨è€…å¿…é¡»æ˜¯ä¸€ä¸ªçº¿ç¨‹ï¼Œjoin() æ–¹æ³•ä¸»è¦æ˜¯è®©è°ƒç”¨è¯¥æ–¹æ³•çš„ Thread å®Œæˆ run() æ–¹æ³•é‡Œé¢çš„ä¸œè¥¿åï¼Œå†æ‰§è¡Œ join() æ–¹æ³•åé¢çš„ä»£ç ï¼Œçœ‹ä¸‹ä¸‹é¢çš„&quot;æ„æ€&quot;ä»£ç ï¼š</p>
<p>Thread t1 = new Thread(è®¡æ•°çº¿ç¨‹ä¸€);<br>
Thread t2 = new Thread(è®¡æ•°çº¿ç¨‹äºŒ);<br>
t1.start();<br>
t1.join(); // ç­‰å¾…è®¡æ•°çº¿ç¨‹ä¸€æ‰§è¡Œå®Œæˆï¼Œå†æ‰§è¡Œè®¡æ•°çº¿ç¨‹äºŒ<br>
t2.start();<br>
å¯åŠ¨ t1 åï¼Œè°ƒç”¨äº† join() æ–¹æ³•ï¼Œç›´åˆ° t1 çš„è®¡æ•°ä»»åŠ¡ç»“æŸï¼Œæ‰è½®åˆ° t2 å¯åŠ¨ï¼Œç„¶å t2 æ‰å¼€å§‹è®¡æ•°ä»»åŠ¡ï¼Œä¸¤ä¸ªçº¿ç¨‹æ˜¯æŒ‰ç€ä¸¥æ ¼çš„é¡ºåºæ¥æ‰§è¡Œçš„ã€‚å¦‚æœ t2 çš„æ‰§è¡Œéœ€è¦ä¾èµ–äº t1 ä¸­çš„å®Œæ•´æ•°æ®çš„æ—¶å€™ï¼Œè¿™ç§æ–¹æ³•å°±å¯ä»¥å¾ˆå¥½çš„ç¡®ä¿ä¸¤ä¸ªçº¿ç¨‹çš„åŒæ­¥æ€§ã€‚</p>
<p>Thread.yield() æ–¹æ³•<br>
Thread.sleep(long time)ï¼šçº¿ç¨‹æš‚æ—¶ç»ˆæ­¢æ‰§è¡Œï¼ˆç¡çœ ï¼‰ä¸€å®šçš„æ—¶é—´ã€‚<br>
Thread.yield()ï¼šçº¿ç¨‹æ”¾å¼ƒè¿è¡Œï¼Œå°†CPUçš„æ§åˆ¶æƒè®©å‡ºã€‚</p>
<p>è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½ä¼šå°†å½“å‰è¿è¡Œçº¿ç¨‹çš„CPUæ§åˆ¶æƒè®©å‡ºæ¥ï¼Œä½† sleep() æ–¹æ³•åœ¨æŒ‡å®šçš„ç¡çœ æ—¶é—´å†…ä¸€å®šä¸ä¼šå†å¾—åˆ°è¿è¡Œæœºä¼šï¼Œç›´åˆ°å®ƒçš„ç¡çœ æ—¶é—´å®Œæˆï¼›è€Œ yield() æ–¹æ³•è®©å‡ºæ§åˆ¶æƒåï¼Œè¿˜æœ‰å¯èƒ½é©¬ä¸Šè¢«ç³»ç»Ÿçš„è°ƒåº¦æœºåˆ¶é€‰ä¸­æ¥è¿è¡Œï¼Œæ¯”å¦‚ï¼Œæ‰§è¡Œyield()æ–¹æ³•çš„çº¿ç¨‹ä¼˜å…ˆçº§é«˜äºå…¶ä»–çš„çº¿ç¨‹ï¼Œé‚£ä¹ˆè¿™ä¸ªçº¿ç¨‹å³ä½¿æ‰§è¡Œäº† yield() æ–¹æ³•ä¹Ÿå¯èƒ½ä¸èƒ½èµ·åˆ°è®©å‡ºCPUæ§åˆ¶æƒçš„æ•ˆæœï¼Œå› ä¸ºå®ƒè®©å‡ºæ§åˆ¶æƒåï¼Œè¿›å…¥æ’é˜Ÿé˜Ÿåˆ—ï¼Œè°ƒåº¦æœºåˆ¶å°†ä»ç­‰å¾…è¿è¡Œçš„çº¿ç¨‹é˜Ÿåˆ—ä¸­é€‰å‡ºä¸€ä¸ªç­‰çº§æœ€é«˜çš„çº¿ç¨‹æ¥è¿è¡Œï¼Œé‚£ä¹ˆå®ƒåˆï¼ˆå¾ˆå¯èƒ½ï¼‰è¢«é€‰ä¸­æ¥è¿è¡Œã€‚</p>
<p>æ‰©å±•<br>
çº¿ç¨‹è°ƒåº¦ç­–ç•¥</p>
<p>(1) æŠ¢å å¼è°ƒåº¦ç­–ç•¥</p>
<p>Javaè¿è¡Œæ—¶ç³»ç»Ÿçš„çº¿ç¨‹è°ƒåº¦ç®—æ³•æ˜¯æŠ¢å å¼çš„ã€‚Javaè¿è¡Œæ—¶ç³»ç»Ÿæ”¯æŒä¸€ç§ç®€å•çš„å›ºå®šä¼˜å…ˆçº§çš„è°ƒåº¦ç®—æ³•ã€‚å¦‚æœä¸€ä¸ªä¼˜å…ˆçº§æ¯”å…¶ä»–ä»»ä½•å¤„äºå¯è¿è¡ŒçŠ¶æ€çš„çº¿ç¨‹éƒ½é«˜çš„çº¿ç¨‹è¿›å…¥å°±ç»ªçŠ¶æ€ï¼Œé‚£ä¹ˆè¿è¡Œæ—¶ç³»ç»Ÿå°±ä¼šé€‰æ‹©è¯¥çº¿ç¨‹è¿è¡Œã€‚æ–°çš„ä¼˜å…ˆçº§è¾ƒé«˜çš„çº¿ç¨‹æŠ¢å äº†å…¶ä»–çº¿ç¨‹ã€‚ä½†æ˜¯Javaè¿è¡Œæ—¶ç³»ç»Ÿå¹¶ä¸æŠ¢å åŒä¼˜å…ˆçº§çš„çº¿ç¨‹ã€‚æ¢å¥è¯è¯´ï¼ŒJavaè¿è¡Œæ—¶ç³»ç»Ÿä¸æ˜¯åˆ†æ—¶çš„ã€‚ç„¶è€Œï¼ŒåŸºäºJava Threadç±»çš„å®ç°ç³»ç»Ÿå¯èƒ½æ˜¯æ”¯æŒåˆ†æ—¶çš„ï¼Œå› æ­¤ç¼–å†™ä»£ç æ—¶ä¸è¦ä¾èµ–åˆ†æ—¶ã€‚å½“ç³»ç»Ÿä¸­çš„å¤„äºå°±ç»ªçŠ¶æ€çš„çº¿ç¨‹éƒ½å…·æœ‰ç›¸åŒä¼˜å…ˆçº§æ—¶ï¼Œçº¿ç¨‹è°ƒåº¦ç¨‹åºé‡‡ç”¨ä¸€ç§ç®€å•çš„ã€éæŠ¢å å¼çš„è½®è½¬çš„è°ƒåº¦é¡ºåºã€‚</p>
<p>(2) æ—¶é—´ç‰‡è½®è½¬è°ƒåº¦ç­–ç•¥</p>
<p>æœ‰äº›ç³»ç»Ÿçš„çº¿ç¨‹è°ƒåº¦é‡‡ç”¨æ—¶é—´ç‰‡è½®è½¬è°ƒåº¦ç­–ç•¥ã€‚è¿™ç§è°ƒåº¦ç­–ç•¥æ˜¯ä»æ‰€æœ‰å¤„äºå°±ç»ªçŠ¶æ€çš„çº¿ç¨‹ä¸­é€‰æ‹©ä¼˜å…ˆçº§æœ€é«˜çš„çº¿ç¨‹åˆ†é…ä¸€å®šçš„CPUæ—¶é—´è¿è¡Œã€‚è¯¥æ—¶é—´è¿‡åå†é€‰æ‹©å…¶ä»–çº¿ç¨‹è¿è¡Œã€‚åªæœ‰å½“çº¿ç¨‹è¿è¡Œç»“æŸã€æ”¾å¼ƒ(yield)CPUæˆ–ç”±äºæŸç§åŸå› è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œä½ä¼˜å…ˆçº§çš„çº¿ç¨‹æ‰æœ‰æœºä¼šæ‰§è¡Œã€‚å¦‚æœæœ‰ä¸¤ä¸ªä¼˜å…ˆçº§ç›¸åŒçš„çº¿ç¨‹éƒ½åœ¨ç­‰å¾…CPUï¼Œåˆ™è°ƒåº¦ç¨‹åºä»¥è½®è½¬çš„æ–¹å¼é€‰æ‹©è¿è¡Œçš„çº¿ç¨‹ã€‚</p>
<p>ä»¥ä¸ŠæŠŠè¿™äº›æŠ€æœ¯ç‚¹æ€»ç»“å‡ºæ¥ï¼Œåé¢æˆ‘ä¼šæŠŠå¤šçº¿ç¨‹è¿™å—çš„ç¤ºä¾‹ä»£ç æ›´æ–°åˆ° ã€Šä¸ªäººå­¦ä¹ é¡¹ç›®DroidStudyã€‹ï¼Œæ„Ÿè°¢æ‚¨çš„å…³æ³¨ã€‚</p>
<p>â— çº¿ç¨‹æ± <br>
åˆ›å»ºå¤šä¸ªçº¿ç¨‹ä¸å…‰éº»çƒ¦è€Œä¸”ç›¸å¯¹å½±å“ç³»ç»Ÿæ€§èƒ½ï¼Œæ¥ä¸‹æ¥è®©æˆ‘çœ‹çœ‹ä½¿ç”¨çº¿ç¨‹æ± æ¥æ“ä½œå¤šçº¿ç¨‹ã€‚æˆ‘æŠŠè‡ªå·±çš„ ã€Šä¸ªäººå­¦ä¹ é¡¹ç›®DroidStudyã€‹ ä¸­çº¿ç¨‹æ± è½¬æˆä¸€ä¸ª gif æ•ˆæœå›¾ï¼Œå¤§å®¶å¯ä»¥å®é™…æŠŠç©ä¸‹å»æ„Ÿå—çº¿ç¨‹æ± çš„åŸç†ï¼Œæœ‰å…´è¶£çš„åŒå­¦ä¹Ÿå¯ä»¥å…ˆ star ä¸‹ï¼Œæˆ‘ä¼šåœ¨æ¥ä¸‹æ¥çš„å‡ ä¸ªæœˆæŠŠè¿™ä¸ªå­¦ä¹ çš„Demoå·¥ç¨‹å®Œå–„å¥½ã€‚</p>
<p>çº¿ç¨‹æ± .gif<br>
çº¿ç¨‹æ± çš„ä¼˜ç‚¹<br>
1ï¼‰é¿å…çº¿ç¨‹çš„åˆ›å»ºå’Œé”€æ¯å¸¦æ¥çš„æ€§èƒ½å¼€é”€ã€‚<br>
2ï¼‰é¿å…å¤§é‡çš„çº¿ç¨‹é—´å› äº’ç›¸æŠ¢å ç³»ç»Ÿèµ„æºå¯¼è‡´çš„é˜»å¡ç°è±¡ã€‚<br>
3ï½èƒ½å¤Ÿå¯¹çº¿ç¨‹è¿›è¡Œç®€å•çš„ç®¡ç†å¹¶æä¾›å®šæ—¶æ‰§è¡Œã€é—´éš”æ‰§è¡Œç­‰åŠŸèƒ½ã€‚</p>
<p>å†æ’¸ä¸€æ’¸æ¦‚å¿µ<br>
Javaé‡Œé¢çº¿ç¨‹æ± çš„é¡¶çº§æ¥å£æ˜¯ Executorï¼Œä¸è¿‡çœŸæ­£çš„çº¿ç¨‹æ± æ¥å£æ˜¯ ExecutorServiceï¼Œ ExecutorService çš„é»˜è®¤å®ç°æ˜¯ ThreadPoolExecutorï¼›æ™®é€šç±» Executors é‡Œé¢è°ƒç”¨çš„å°±æ˜¯ ThreadPoolExecutorã€‚</p>
<p>ç…§ä¾‹çœ‹ä¸€ä¸‹å„ä¸ªæ¥å£çš„æºç ï¼š</p>
<p>public interface Executor {<br>
void execute(Runnable command);<br>
}</p>
<p>public interface ExecutorService extends Executor {<br>
void shutdown();<br>
List<Runnable> shutdownNow();</p>
<pre><code>boolean isShutdown();
boolean isTerminated();

&lt;T&gt; Future&lt;T&gt; submit(Callable&lt;T&gt; task);
&lt;T&gt; Future&lt;T&gt; submit(Runnable task, T result);
Future&lt;?&gt; submit(Runnable task);
...
</code></pre>
<p>}</p>
<p>public class Executors {<br>
public static ExecutorService newCachedThreadPool() {<br>
return new ThreadPoolExecutor(0, Integer.MAX_VALUE, 60L, TimeUnit.SECONDS,<br>
new SynchronousQueue<Runnable>());<br>
}<br>
...<br>
}<br>
ä¸‹é¢æˆ‘åˆ›å»ºçš„ä¸€ä¸ªçº¿ç¨‹æ± ï¼š</p>
<p>ExecutorService pool = Executors.newCachedThreadPool();<br>
Executors æä¾›å››ç§çº¿ç¨‹æ± ï¼š</p>
<p>1ï¼‰newCachedThreadPool æ˜¯ä¸€ä¸ªå¯æ ¹æ®éœ€è¦åˆ›å»ºæ–°çº¿ç¨‹çš„çº¿ç¨‹æ± ï¼Œä½†æ˜¯åœ¨ä»¥å‰æ„é€ çš„çº¿ç¨‹å¯ç”¨æ—¶å°†é‡ç”¨å®ƒä»¬ã€‚å¯¹äºæ‰§è¡Œå¾ˆå¤šçŸ­æœŸå¼‚æ­¥ä»»åŠ¡çš„ç¨‹åºè€Œè¨€ï¼Œè¿™äº›çº¿ç¨‹æ± é€šå¸¸å¯æé«˜ç¨‹åºæ€§èƒ½ã€‚è°ƒç”¨ execute() å°†é‡ç”¨ä»¥å‰æ„é€ çš„çº¿ç¨‹ï¼ˆå¦‚æœçº¿ç¨‹å¯ç”¨ï¼‰ã€‚å¦‚æœç°æœ‰çº¿ç¨‹æ²¡æœ‰å¯ç”¨çš„ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹å¹¶æ·»åŠ åˆ°æ± ä¸­ã€‚ç»ˆæ­¢å¹¶ä»ç¼“å­˜ä¸­ç§»é™¤é‚£äº›å·²æœ‰ 60 ç§’é’Ÿæœªè¢«ä½¿ç”¨çš„çº¿ç¨‹ã€‚å› æ­¤ï¼Œé•¿æ—¶é—´ä¿æŒç©ºé—²çš„çº¿ç¨‹æ± ä¸ä¼šä½¿ç”¨ä»»ä½•èµ„æºã€‚æ³¨æ„ï¼Œå¯ä»¥ä½¿ç”¨ ThreadPoolExecutor æ„é€ æ–¹æ³•åˆ›å»ºå…·æœ‰ç±»ä¼¼å±æ€§ä½†ç»†èŠ‚ä¸åŒï¼ˆä¾‹å¦‚è¶…æ—¶å‚æ•°ï¼‰çš„çº¿ç¨‹æ± ã€‚</p>
<p>2ï¼‰newSingleThreadExecutor åˆ›å»ºæ˜¯ä¸€ä¸ªå•çº¿ç¨‹æ± ï¼Œä¹Ÿå°±æ˜¯è¯¥çº¿ç¨‹æ± åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨å·¥ä½œï¼Œæ‰€æœ‰çš„ä»»åŠ¡æ˜¯ä¸²è¡Œæ‰§è¡Œçš„ï¼Œå¦‚æœè¿™ä¸ªå”¯ä¸€çš„çº¿ç¨‹å› ä¸ºå¼‚å¸¸ç»“æŸï¼Œé‚£ä¹ˆä¼šæœ‰ä¸€ä¸ªæ–°çš„çº¿ç¨‹æ¥æ›¿ä»£å®ƒï¼Œæ­¤çº¿ç¨‹æ± ä¿è¯æ‰€æœ‰ä»»åŠ¡çš„æ‰§è¡Œé¡ºåºæŒ‰ç…§ä»»åŠ¡çš„æäº¤é¡ºåºæ‰§è¡Œã€‚</p>
<p>3ï¼‰newFixedThreadPool åˆ›å»ºå›ºå®šå¤§å°çš„çº¿ç¨‹æ± ï¼Œæ¯æ¬¡æäº¤ä¸€ä¸ªä»»åŠ¡å°±åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œç›´åˆ°çº¿ç¨‹è¾¾åˆ°çº¿ç¨‹æ± çš„æœ€å¤§å¤§å°ï¼Œçº¿ç¨‹æ± çš„å¤§å°ä¸€æ—¦è¾¾åˆ°æœ€å¤§å€¼å°±ä¼šä¿æŒä¸å˜ï¼Œå¦‚æœæŸä¸ªçº¿ç¨‹å› ä¸ºæ‰§è¡Œå¼‚å¸¸è€Œç»“æŸï¼Œé‚£ä¹ˆçº¿ç¨‹æ± ä¼šè¡¥å……ä¸€ä¸ªæ–°çº¿ç¨‹ã€‚</p>
<p>4ï¼‰newScheduledThreadPool åˆ›å»ºä¸€ä¸ªå¤§å°æ— é™çš„çº¿ç¨‹æ± ï¼Œæ­¤çº¿ç¨‹æ± æ”¯æŒå®šæ—¶ä»¥åŠå‘¨æœŸæ€§æ‰§è¡Œä»»åŠ¡çš„éœ€æ±‚ã€‚</p>
<p>é€šè¿‡ ThreadPoolExecutor çš„æ„é€ å‡½æ•°ï¼Œæ’¸ä¸€æ’¸çº¿ç¨‹æ± ç›¸å…³å‚æ•°çš„æ¦‚å¿µï¼š</p>
<p>public ThreadPoolExecutor(int corePoolSize,<br>
int maximumPoolSize,<br>
long keepAliveTime,<br>
TimeUnit unit,<br>
BlockingQueue<Runnable> workQueue,<br>
ThreadFactory threadFactory) {<br>
this(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue,<br>
threadFactory, defaultHandler);<br>
}<br>
1ï¼‰corePoolSizeï¼šçº¿ç¨‹æ± çš„æ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸ç®¡æœ‰æ²¡æœ‰ä»»åŠ¡éƒ½ä¼šä¸€ç›´åœ¨çº¿ç¨‹æ± ä¸­ä¸€ç›´å­˜æ´»ï¼Œåªæœ‰åœ¨ ThreadPoolExecutor ä¸­çš„æ–¹æ³• allowCoreThreadTimeOut(boolean value) è®¾ç½®ä¸º true æ—¶ï¼Œé—²ç½®çš„æ ¸å¿ƒçº¿ç¨‹ä¼šå­˜åœ¨è¶…æ—¶æœºåˆ¶ï¼Œå¦‚æœåœ¨æŒ‡å®šæ—¶é—´æ²¡æœ‰æ–°ä»»åŠ¡æ¥æ—¶ï¼Œæ ¸å¿ƒçº¿ç¨‹ä¹Ÿä¼šè¢«ç»ˆæ­¢ï¼Œè€Œè¿™ä¸ªæ—¶é—´é—´éš”ç”±ç¬¬3ä¸ªå±æ€§ keepAliveTime æŒ‡å®šã€‚</p>
<p>2ï¼‰maximumPoolSizeï¼šçº¿ç¨‹æ± æ‰€èƒ½å®¹çº³çš„æœ€å¤§çº¿ç¨‹æ•°ï¼Œå½“æ´»åŠ¨çš„çº¿ç¨‹æ•°è¾¾åˆ°è¿™ä¸ªå€¼åï¼Œåç»­çš„æ–°ä»»åŠ¡å°†ä¼šè¢«é˜»å¡ã€‚</p>
<p>3ï¼‰keepAliveTimeï¼šæ§åˆ¶çº¿ç¨‹é—²ç½®æ—¶çš„è¶…æ—¶æ—¶é•¿ï¼Œè¶…è¿‡åˆ™ç»ˆæ­¢è¯¥çº¿ç¨‹ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ç”¨äºéæ ¸å¿ƒçº¿ç¨‹ï¼Œåªæœ‰åœ¨ ThreadPoolExecutor ä¸­çš„æ–¹æ³• allowCoreThreadTimeOut(boolean value) è®¾ç½®ä¸º trueæ—¶ï¼Œä¹Ÿä½œç”¨äºæ ¸å¿ƒçº¿ç¨‹ã€‚</p>
<p>4ï¼‰unitï¼šç”¨äºæŒ‡å®š keepAliveTime å‚æ•°çš„æ—¶é—´å•ä½ï¼ŒTimeUnit æ˜¯ä¸ª enum æšä¸¾ç±»å‹ï¼Œå¸¸ç”¨çš„æœ‰ï¼šTimeUnit.HOURS(å°æ—¶)ã€TimeUnit.MINUTES(åˆ†é’Ÿ)ã€TimeUnit.SECONDS(ç§’) å’Œ TimeUnit.MILLISECONDS(æ¯«ç§’)ç­‰ã€‚</p>
<p>5ï¼‰workQueueï¼šçº¿ç¨‹æ± çš„ä»»åŠ¡é˜Ÿåˆ—ï¼Œé€šè¿‡çº¿ç¨‹æ± çš„ execute(Runnable command) æ–¹æ³•ä¼šå°†ä»»åŠ¡ Runnable å­˜å‚¨åœ¨é˜Ÿåˆ—ä¸­ã€‚</p>
<p>6ï¼‰threadFactoryï¼šçº¿ç¨‹å·¥å‚ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ¥å£ï¼Œç”¨æ¥ä¸ºçº¿ç¨‹æ± åˆ›å»ºæ–°çº¿ç¨‹çš„ã€‚</p>
<p>çº¿ç¨‹æ± çš„å…³é—­</p>
<p>ThreadPoolExecutor æä¾›äº†ä¸¤ä¸ªæ–¹æ³•ï¼Œç”¨äºçº¿ç¨‹æ± çš„å…³é—­ï¼Œåˆ†åˆ«æ˜¯ shutdown() å’Œ shutdownNow()ã€‚</p>
<p>shutdown()ï¼šä¸ä¼šç«‹å³çš„ç»ˆæ­¢çº¿ç¨‹æ± ï¼Œè€Œæ˜¯è¦ç­‰æ‰€æœ‰ä»»åŠ¡ç¼“å­˜é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡éƒ½æ‰§è¡Œå®Œåæ‰ç»ˆæ­¢ï¼Œä½†å†ä¹Ÿä¸ä¼šæ¥å—æ–°çš„ä»»åŠ¡ã€‚<br>
shutdownNow()ï¼šç«‹å³ç»ˆæ­¢çº¿ç¨‹æ± ï¼Œå¹¶å°è¯•æ‰“æ–­æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå¹¶ä¸”æ¸…ç©ºä»»åŠ¡ç¼“å­˜é˜Ÿåˆ—ï¼Œè¿”å›å°šæœªæ‰§è¡Œçš„ä»»åŠ¡ã€‚</p>
<p>é¢è¯•é¢˜<br>
1ï¼‰ä»€ä¹ˆæ˜¯ Executor æ¡†æ¶ï¼Ÿ</p>
<p>Executoræ¡†æ¶åœ¨Java 5ä¸­è¢«å¼•å…¥ï¼ŒExecutor æ¡†æ¶æ˜¯ä¸€ä¸ªæ ¹æ®ä¸€ç»„æ‰§è¡Œç­–ç•¥è°ƒç”¨ã€è°ƒåº¦ã€æ‰§è¡Œå’Œæ§åˆ¶çš„å¼‚æ­¥ä»»åŠ¡çš„æ¡†æ¶ã€‚</p>
<p>æ— é™åˆ¶çš„åˆ›å»ºçº¿ç¨‹ä¼šå¼•èµ·åº”ç”¨ç¨‹åºå†…å­˜æº¢å‡ºï¼Œæ‰€ä»¥åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± æ˜¯ä¸ªæ›´å¥½çš„çš„è§£å†³æ–¹æ¡ˆï¼Œå› ä¸ºå¯ä»¥é™åˆ¶çº¿ç¨‹çš„æ•°é‡å¹¶ä¸”å¯ä»¥å›æ”¶å†åˆ©ç”¨è¿™äº›çº¿ç¨‹ã€‚åˆ©ç”¨ Executor æ¡†æ¶å¯ä»¥éå¸¸æ–¹ä¾¿çš„åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± ã€‚</p>
<p>2ï¼‰Executors ç±»æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>Executorsä¸ºExecutorã€ExecutorServiceã€ScheduledExecutorServiceã€ThreadFactory å’Œ Callable ç±»æä¾›äº†ä¸€äº›å·¥å…·æ–¹æ³•ã€‚Executors å¯ä»¥ç”¨äºæ–¹ä¾¿çš„åˆ›å»ºçº¿ç¨‹æ± ã€‚</p>
<p>ä½œè€…ï¼šå­™ç¦ç”Ÿå¾®åš<br>
é“¾æ¥ï¼šhttps://www.jianshu.com/p/b8197dd2934c<br>
æ¥æºï¼šç®€ä¹¦<br>
è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Spring bootæ•´åˆdynamic-datasourceå®ç°å¤šæ•°æ®æºçš„è¯»å†™åˆ†ç¦»]]></title>
        <id>https://kimiz3369.github.io/post/spring-boot-zheng-he-dynamic-datasource-shi-xian-duo-shu-ju-yuan-de-du-xie-fen-chi/</id>
        <link href="https://kimiz3369.github.io/post/spring-boot-zheng-he-dynamic-datasource-shi-xian-duo-shu-ju-yuan-de-du-xie-fen-chi/">
        </link>
        <updated>2020-03-05T06:01:04.000Z</updated>
        <content type="html"><![CDATA[<p>å¤šæ•°æ®æºçš„è¯»å†™åˆ†ç¦»<br>
å‚è€ƒæ–‡ç« ï¼šhttps://mybatis.plus/guide/dynamic-datasource.html<br>
æœ¬æ–‡ç¯å¢ƒï¼š</p>
<p>ç‰ˆæœ¬<br>
springboot	2.1.0.RELEASE<br>
druid	1.1.18<br>
dynamic-datasource	2.4.2<br>
1ã€mavenä¾èµ–é…ç½®<br>
<!-- druid --><br>
<!-- https://mvnrepository.com/artifact/com.alibaba/druid-spring-boot-starter --><br>
<dependency><br>
<groupId>com.alibaba</groupId><br>
<artifactId>druid-spring-boot-starter</artifactId><br>
<version>1.1.18</version><br>
</dependency><br>
<!--ä¸»ä»é…ç½®ä¾èµ–--><br>
<dependency><br>
<groupId>com.baomidou</groupId><br>
<artifactId>dynamic-datasource-spring-boot-starter</artifactId><br>
<version>2.4.2</version><br>
</dependency><br>
2ã€application.propertiesé…ç½®</p>
<h2 id="druidè¿æ¥æ± é…ç½®">druidè¿æ¥æ± é…ç½®</h2>
<h1 id="é»˜è®¤æ•°æ®æº">é»˜è®¤æ•°æ®æº</h1>
<p>spring.datasource.dynamic.primary=master</p>
<h1 id="ä¸»åº“é…ç½®-master">ä¸»åº“é…ç½® master</h1>
<p>spring.datasource.dynamic.datasource.master.username=root<br>
spring.datasource.dynamic.datasource.master.password=root<br>
spring.datasource.dynamic.datasource.master.driver-class-name=com.mysql.cj.jdbc.Driver<br>
spring.datasource.dynamic.datasource.master.url=jdbc:mysql://127.0.0.1:3306/java_demo?serverTimezone=GMT%2B8&amp;useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false<br>
spring.datasource.dynamic.datasource.master.druid.initial-size=5<br>
spring.datasource.dynamic.datasource.master.druid.max-active=20<br>
spring.datasource.dynamic.datasource.master.druid.min-idle=5<br>
spring.datasource.dynamic.datasource.master.druid.max-wait=60000<br>
spring.datasource.dynamic.datasource.master.druid.min-evictable-idle-time-millis=300000<br>
spring.datasource.dynamic.datasource.master.druid.max-evictable-idle-time-millis=300000<br>
spring.datasource.dynamic.datasource.master.druid.time-between-eviction-runs-millis=60000<br>
spring.datasource.dynamic.datasource.master.druid.validation-query=select 1<br>
spring.datasource.dynamic.datasource.master.druid.validation-query-timeout=-1<br>
spring.datasource.dynamic.datasource.master.druid.test-on-borrow=false<br>
spring.datasource.dynamic.datasource.master.druid.test-on-return=false<br>
spring.datasource.dynamic.datasource.master.druid.test-while-idle=true<br>
spring.datasource.dynamic.datasource.master.druid.pool-prepared-statements=true<br>
spring.datasource.dynamic.datasource.master.druid.filters=stat,wall,log4j<br>
spring.datasource.dynamic.datasource.master.druid.share-prepared-statements=true</p>
<h1 id="ä»åº“é…ç½®-slave">ä»åº“é…ç½® slave</h1>
<p>spring.datasource.dynamic.datasource.slave.username=root<br>
spring.datasource.dynamic.datasource.slave.password=root<br>
spring.datasource.dynamic.datasource.slave.driver-class-name=com.mysql.cj.jdbc.Driver<br>
spring.datasource.dynamic.datasource.slave.url=jdbc:mysql://127.0.0.1:3307/java_demo?serverTimezone=GMT%2B8&amp;useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false<br>
spring.datasource.dynamic.datasource.slave.druid.initial-size=5<br>
spring.datasource.dynamic.datasource.slave.druid.max-active=20<br>
spring.datasource.dynamic.datasource.slave.druid.min-idle=5<br>
spring.datasource.dynamic.datasource.slave.druid.max-wait=60000<br>
spring.datasource.dynamic.datasource.slave.druid.min-evictable-idle-time-millis=300000<br>
spring.datasource.dynamic.datasource.slave.druid.max-evictable-idle-time-millis=300000<br>
spring.datasource.dynamic.datasource.slave.druid.time-between-eviction-runs-millis=60000<br>
spring.datasource.dynamic.datasource.slave.druid.validation-query=select 1<br>
spring.datasource.dynamic.datasource.slave.druid.validation-query-timeout=-1<br>
spring.datasource.dynamic.datasource.slave.druid.test-on-borrow=false<br>
spring.datasource.dynamic.datasource.slave.druid.test-on-return=false<br>
spring.datasource.dynamic.datasource.slave.druid.test-while-idle=true<br>
spring.datasource.dynamic.datasource.slave.druid.pool-prepared-statements=true<br>
spring.datasource.dynamic.datasource.slave.druid.filters=stat,wall,log4j<br>
spring.datasource.dynamic.datasource.slave.druid.share-prepared-statements=true</p>
<h1 id="å½“é‡åˆ°åŒæ ·åå­—çš„æ—¶å€™æ˜¯å¦å…è®¸è¦†ç›–æ³¨å†Œ">å½“é‡åˆ°åŒæ ·åå­—çš„æ—¶å€™ï¼Œæ˜¯å¦å…è®¸è¦†ç›–æ³¨å†Œ</h1>
<p>spring.main.allow-bean-definition-overriding=true</p>
<h2 id="druidè®¿é—®åœ°å€é…ç½®">druidè®¿é—®åœ°å€é…ç½®</h2>
<p>druid.login.username=root<br>
druid.login.password=root<br>
druid.allow.ip=127.0.0.1<br>
3ã€å¯åŠ¨ç±»é…ç½®<br>
åœ¨å¯åŠ¨ç±»@SpringBootApplicationæ³¨è§£ä¸­ï¼Œæ·»åŠ æ’é™¤åŸç”ŸDruidçš„é…ç½®ç±»ã€‚</p>
<p>@SpringBootApplication(exclude = DruidDataSourceAutoConfigure.class)<br>
public class ApiApplication {<br>
public static void main(String[] args) {<br>
SpringApplication.run(ApiApplication.class, args);<br>
}<br>
}</p>
<p>Qï¼šä¸ºä»€ä¹ˆè¦æ’é™¤DruidDataSourceAutoConfigure ï¼Ÿ<br>
Aï¼šDruidDataSourceAutoConfigureä¼šæ³¨å…¥ä¸€ä¸ªDataSourceWrapperï¼Œå…¶ä¼šåœ¨åŸç”Ÿçš„spring.datasourceä¸‹æ‰¾url,username,passwordç­‰ã€‚è€Œæˆ‘ä»¬åŠ¨æ€æ•°æ®æºçš„é…ç½®è·¯å¾„æ˜¯å˜åŒ–çš„ã€‚</p>
<p>4ã€ä½¿ç”¨ï¼šä½¿ç”¨ @DS åˆ‡æ¢æ•°æ®æº<br>
ä¸Šé¢ä¸‰æ­¥ï¼Œå·²é…ç½®å¥½è¯»å†™åˆ†ç¦»ï¼Œä¸‹é¢ä½¿ç”¨æ³¨è§£å³å¯é€‰æ‹©ä½¿ç”¨ä¸»ä»åº“ã€‚</p>
<p>@Service<br>
@DS(&quot;slave&quot;)<br>
public class UserServiceImpl implements UserService {</p>
<p>@Autowired<br>
private JdbcTemplate jdbcTemplate;</p>
<p>public List&lt;Map&lt;String, Object&gt;&gt; selectAll() {<br>
return  jdbcTemplate.queryForList(&quot;select * from user&quot;);<br>
}</p>
<p>@Override<br>
@DS(&quot;slave_1&quot;)<br>
public List&lt;Map&lt;String, Object&gt;&gt; selectByCondition() {<br>
return  jdbcTemplate.queryForList(&quot;select * from user where age &gt;10&quot;);<br>
}<br>
}<br>
@DS(&quot;slave&quot;)<br>
public interface UserMapper {</p>
<p>@Insert(&quot;INSERT INTO user (name,age) values (#{name},#{age})&quot;)<br>
boolean addUser(@Param(&quot;name&quot;) String name, @Param(&quot;age&quot;) Integer age);</p>
<p>@Update(&quot;UPDATE user set name=#{name}, age=#{age} where id =#{id}&quot;)<br>
boolean updateUser(@Param(&quot;id&quot;) Integer id, @Param(&quot;name&quot;) String name, @Param(&quot;age&quot;) Integer age);</p>
<p>@Delete(&quot;DELETE from user where id =#{id}&quot;)<br>
boolean deleteUser(@Param(&quot;id&quot;) Integer id);</p>
<p>@Select(&quot;SELECT * FROM user&quot;)<br>
@DS(&quot;slave_1&quot;)<br>
List<User> selectAll();<br>
}<br>
@DS(â€œslave_1â€) æ‹¬å·å†…å³æ˜¯application.propertiesä¸­é…ç½®çš„æ•°æ®æºåç§°ï¼Œä¸åŠ æ³¨è§£é»˜è®¤æ˜¯è®¿é—®ä¸»åº“masterï¼Œå¯åŠ åœ¨serviceæ–¹æ³•ä¸Šï¼Œä¹Ÿå¯åŠ åœ¨mapperæ–¹æ³•ä¸Šï¼Œä½†å¼ºçƒˆä¸å»ºè®®åŒæ—¶åœ¨serviceå’Œmapperæ³¨è§£ã€‚ (å¯èƒ½ä¼šæœ‰é—®é¢˜)<br>
@DS å¯ä»¥æ³¨è§£åœ¨æ–¹æ³•ä¸Šå’Œç±»ä¸Šï¼ŒåŒæ—¶å­˜åœ¨æ–¹æ³•æ³¨è§£ä¼˜å…ˆäºç±»ä¸Šæ³¨è§£ã€‚<br>
æœ¬æ–‡çš„application.propertiesä¸­æ²¡æœ‰é…ç½®åä¸ºslave_1çš„æ•°æ®æºï¼Œä»£ç é‡Œåªåšæ¼”ç¤ºç¤ºä¾‹ï¼Œå¯å°†slave_1æ”¹æˆå¯¹åº”çš„æ•°æ®æºåç§°ã€‚<br>
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>
ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€ŒJerry_1998ã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ª CC 4.0 BY-SA ç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚<br>
åŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/weixin_44605704/article/details/97746557</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[å®ç”¨å·¥å…·ç±»]]></title>
        <id>https://kimiz3369.github.io/post/shi-yong-gong-ju-lei/</id>
        <link href="https://kimiz3369.github.io/post/shi-yong-gong-ju-lei/">
        </link>
        <updated>2020-03-02T04:25:03.000Z</updated>
        <content type="html"><![CDATA[<p>1ã€Gridea<br>
ä¸‹è½½ï¼šhttps://gridea.dev/<br>
ä½¿ç”¨ï¼šhttps://gridea.dev/gridea-start/</p>
<p>2ã€ä»»åŠ¡ç®¡ç†ç”˜ç‰¹å›¾<br>
https://www.ganttproject.biz/</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hello Gridea]]></title>
        <id>https://kimiz3369.github.io/post/hello-gridea/</id>
        <link href="https://kimiz3369.github.io/post/hello-gridea/">
        </link>
        <updated>2018-12-11T16:00:00.000Z</updated>
        <summary type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
]]></summary>
        <content type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
<!-- more -->
<p><a href="https://github.com/getgridea/gridea">Github</a><br>
<a href="https://gridea.dev/">Gridea ä¸»é¡µ</a><br>
<a href="http://fehey.com/">ç¤ºä¾‹ç½‘ç«™</a></p>
<h2 id="ç‰¹æ€§">ç‰¹æ€§ğŸ‘‡</h2>
<p>ğŸ“  ä½ å¯ä»¥ä½¿ç”¨æœ€é…·çš„ <strong>Markdown</strong> è¯­æ³•ï¼Œè¿›è¡Œå¿«é€Ÿåˆ›ä½œ</p>
<p>ğŸŒ‰  ä½ å¯ä»¥ç»™æ–‡ç« é…ä¸Šç²¾ç¾çš„å°é¢å›¾å’Œåœ¨æ–‡ç« ä»»æ„ä½ç½®æ’å…¥å›¾ç‰‡</p>
<p>ğŸ·ï¸  ä½ å¯ä»¥å¯¹æ–‡ç« è¿›è¡Œæ ‡ç­¾åˆ†ç»„</p>
<p>ğŸ“‹  ä½ å¯ä»¥è‡ªå®šä¹‰èœå•ï¼Œç”šè‡³å¯ä»¥åˆ›å»ºå¤–éƒ¨é“¾æ¥èœå•</p>
<p>ğŸ’»  ä½ å¯ä»¥åœ¨ <strong>Windows</strong>ï¼Œ<strong>MacOS</strong> æˆ– <strong>Linux</strong> è®¾å¤‡ä¸Šä½¿ç”¨æ­¤å®¢æˆ·ç«¯</p>
<p>ğŸŒ  ä½ å¯ä»¥ä½¿ç”¨ <strong>ğ–¦ğ—‚ğ—ğ—ğ—ğ–» ğ–¯ğ–ºğ—€ğ–¾ğ—Œ</strong> æˆ– <strong>Coding Pages</strong> å‘ä¸–ç•Œå±•ç¤ºï¼Œæœªæ¥å°†æ”¯æŒæ›´å¤šå¹³å°</p>
<p>ğŸ’¬  ä½ å¯ä»¥è¿›è¡Œç®€å•çš„é…ç½®ï¼Œæ¥å…¥ <a href="https://github.com/gitalk/gitalk">Gitalk</a> æˆ– <a href="https://github.com/SukkaW/DisqusJS">DisqusJS</a> è¯„è®ºç³»ç»Ÿ</p>
<p>ğŸ‡¬ğŸ‡§  ä½ å¯ä»¥ä½¿ç”¨<strong>ä¸­æ–‡ç®€ä½“</strong>æˆ–<strong>è‹±è¯­</strong></p>
<p>ğŸŒ  ä½ å¯ä»¥ä»»æ„ä½¿ç”¨åº”ç”¨å†…é»˜è®¤ä¸»é¢˜æˆ–ä»»æ„ç¬¬ä¸‰æ–¹ä¸»é¢˜ï¼Œå¼ºå¤§çš„ä¸»é¢˜è‡ªå®šä¹‰èƒ½åŠ›</p>
<p>ğŸ–¥  ä½ å¯ä»¥è‡ªå®šä¹‰æºæ–‡ä»¶å¤¹ï¼Œåˆ©ç”¨ OneDriveã€ç™¾åº¦ç½‘ç›˜ã€iCloudã€Dropbox ç­‰è¿›è¡Œå¤šè®¾å¤‡åŒæ­¥</p>
<p>ğŸŒ± å½“ç„¶ <strong>Gridea</strong> è¿˜å¾ˆå¹´è½»ï¼Œæœ‰å¾ˆå¤šä¸è¶³ï¼Œä½†è¯·ç›¸ä¿¡ï¼Œå®ƒä¼šä¸åœå‘å‰ ğŸƒ</p>
<p>æœªæ¥ï¼Œå®ƒä¸€å®šä¼šæˆä¸ºä½ ç¦»ä¸å¼€çš„ä¼™ä¼´</p>
<p>å°½æƒ…å‘æŒ¥ä½ çš„æ‰åå§ï¼</p>
<p>ğŸ˜˜ Enjoy~</p>
]]></content>
    </entry>
</feed>